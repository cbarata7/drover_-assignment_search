(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(227)},125:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),s=a.n(r),o=a(11),l=a(12),c=a(14),u=a(13),d=a(15),p=(a(125),a(108)),m=a.n(p),h=a(33),v=a.n(h),f=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).paginationChange=function(t){t!==e.props.pageMetadata.page&&t>0&&t<=e.state.total&&e.props.callback({page:t})},e.state={active:1,total:5},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.pageMetadata&&this.props.pageMetadata!==e.pageMetadata){var t=this.props.pageMetadata.page,a=Math.ceil(this.props.pageMetadata.total_count/this.props.pageMetadata.per_page);this.setState({active:t,total:a})}}},{key:"loadPaginationNumber",value:function(){var e=this,t=[];if(this.props.pageMetadata){var a,n,r=this.state.active,s=this.state.total;r-2<1?(a=1,n=s<5?s:5):r+2>s?(a=s-4,n=s):(a=r-2,n=r+2);for(var o=function(a){t.push(i.a.createElement(v.a.Item,{key:a,active:a===r,onClick:function(){return e.paginationChange(a)}},a))},l=a;l<=n;l++)o(l);return t}}},{key:"render",value:function(){var e=this,t=this.props.hide?{display:"none"}:{};return i.a.createElement("div",{className:"text-center",style:t},i.a.createElement(v.a,{bsSize:"large"},i.a.createElement(v.a.First,{onClick:function(){return e.paginationChange(1)}}),i.a.createElement(v.a.Prev,{onClick:function(){return e.paginationChange(e.state.active-1)}}),this.loadPaginationNumber(),i.a.createElement(v.a.Next,{onClick:function(){return e.paginationChange(e.state.active+1)}}),i.a.createElement(v.a.Last,{onClick:function(){return e.paginationChange(e.state.total)}})))}}]),t}(n.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getPriceForCar",value:function(e){var t,a;return"Consumer"===this.props.metadata.vehicle_type?(t="subtotal_price_pounds",a=this.props.numberOfMonths):(t="driver_price_pounds_after_discount_including_insurance",a=this.props.numberOfWeeks),this.calculatePriceForCar(e.price_discount_and_deposit_schedule_hash,a,t)}},{key:"calculatePriceForCar",value:function(e,t,a){for(var n,i=Object.keys(e),r=0;r<i.length;r++){var s=i[r];if(t===parseInt(s))return Math.round(e[s][a]);if(t<parseInt(s))return Math.round(e[n][a]);n=s}}},{key:"loadGridContent",value:function(e){var t=this;return e.map(function(e,a){var n=e.stock_image?e.stock_image.main_image_url:e.images[0].small_image_url;return i.a.createElement("div",{key:a,className:"col-xs-12 col-sm-4 col-lg-4 gridCols"},i.a.createElement("div",{className:"carImage",style:{backgroundImage:"url("+n+")"}},i.a.createElement("div",{className:"carInfo"},i.a.createElement("div",{className:"titleDiv"},i.a.createElement("h4",{className:"title font-weight-medium"},e.year," ",e.vehicle_make),i.a.createElement("p",null,e.vehicle_model," ",e.engine_size_information?"-":" "," ",e.engine_size_information," ")),i.a.createElement("div",{className:"text-right price-label"},i.a.createElement("h3",{className:"price font-weight-medium"},"\xa3"+t.getPriceForCar(e)),i.a.createElement("p",null,"A month")))))})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"row vehicle-list-container w-100"},this.loadGridContent(this.props.cars)),i.a.createElement(f,{hide:this.props.isLoading||0===this.props.cars.length,pageMetadata:this.props.metadata,callback:this.props.callback})))}}]),t}(n.Component),y=a(119),g=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){if(e.state.selectedOption!==t){var a={};e.setState({selectedOption:t}),a[e.props.metadataKey]=t.value,e.props.onSelectCustomBox(a)}},e.state={selectedOption:void 0},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"side-bar-option"},i.a.createElement("div",{className:"row side-bar-labels"},this.props.name),i.a.createElement("div",{className:"row"},i.a.createElement(y.a,{defaultValue:this.props.options[this.props.defaultOptionIndex],className:"select",value:this.state.selectedOption,onChange:this.handleChange,options:this.props.options})))}}]),t}(n.Component),O=a(230),_=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){({})[e.props.metadataKey]=t.value,e.props.onBlurCustomInput(t)},e._handleKeyPress=function(t){"Enter"===t.key&&e.inputChange()},e.handleText=function(t){e.setState({inputValue:t.target.value})},e.inputChange=function(){e.handleChange({location:e.state.inputValue})},e.state={location:null,inputValue:""},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"side-bar-option"},i.a.createElement("div",{className:"row side-bar-labels"},this.props.name),i.a.createElement("div",{className:"row"},i.a.createElement(O.a,{type:"text",ref:this.state.inputValue,onChange:this.handleText,onBlur:this.inputChange,defaultValue:this.props.defaultOption,onKeyPress:this._handleKeyPress})))}}]),t}(n.Component),E=a(78),C=(a(219),a(221),(0,E.a.createSliderWithTooltip)(E.a.Range)),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this))).handleDroped=function(e){var t={};t[a.props.metadataKeys[0]]=e[0],t[a.props.metadataKeys[1]]=e[1],a.props.onDropSlider(t)},a.changeValue=function(e){a.setState({minValue:e[0],maxValue:e[1]})},a.state={minValue:e.defaultOptionIndex[0],maxValue:e.defaultOptionIndex[1]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"side-bar-option"},i.a.createElement("div",{className:"row side-bar-labels"},this.props.name),i.a.createElement("div",{className:"row"},this.state.minValue," - ",this.state.maxValue),i.a.createElement("div",{className:"row"},i.a.createElement(C,{min:this.props.defaultOptionIndex[0],max:this.props.defaultOptionIndex[1],defaultValue:[this.props.defaultOptionIndex[0],this.props.defaultOptionIndex[1]],onChange:this.changeValue,onAfterChange:this.handleDroped})))}}]),t}(n.Component),j=a(228),x=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).radioChanged=function(t){var a,n=1!==parseInt(t.target.value);e.setState({hideDuration:n}),"Consumer"===e.props.vehicleType?(n&&e.forceUpdate(),a={number_of_months:n?1:12}):"PCO"===e.props.vehicleType&&(a={number_of_weeks:n?1:52}),e.props.onSelectCustomBox(a)},e.state={hideDuration:!1,defaultDuration:12},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"buildOptionsForDuration",value:function(e,t){for(var a=[],n=2;n<e;n++)a.push({value:n,label:n+t});return a}},{key:"addDuration",value:function(e,t,a,n){return e?i.a.createElement("div",null):i.a.createElement("div",null,i.a.createElement(g,{hide:this.state.hideDuration,name:"Duration",metadataKey:t,options:a,defaultOptionIndex:n,onSelectCustomBox:this.props.onSelectCustomBox}))}},{key:"render",value:function(){var e,t,a,n,r;return this.props.vehicleType?("Consumer"===this.props.vehicleType?(e=13,t="number_of_months",a=10,n=this.buildOptionsForDuration(e," Months"),r="Month to month subscription"):"PCO"===this.props.vehicleType&&(e=53,t="number_of_weeks",a=50,n=this.buildOptionsForDuration(e," Weeks"),r="Weekly rolling subscription"),i.a.createElement("div",{className:"subscription-area"},i.a.createElement("label",null,"Subscription type"),i.a.createElement(j.a,{className:"subscription-label",checked:this.state.hideDuration,name:"groupOptions",value:0,onChange:this.radioChanged},r),i.a.createElement(j.a,{className:"subscription-label",checked:!this.state.hideDuration,name:"groupOptions",value:1,onChange:this.radioChanged},"Commit and save subscription"),this.addDuration(this.state.hideDuration,t,n,a))):i.a.createElement("div",null)}}]),t}(n.Component),N=function(e,t){var a=[{value:void 0,label:"Any"}];if(t){var n=t[e];for(var i in n)n.hasOwnProperty(i)&&("year"===e&&(i=parseInt(i)),a.push({value:i,label:i+"("+n[i]+")"}))}return a},w=function(e){var t=[];return"Consumer"===e?t=[2,14,30]:"PCO"===e&&(t=[2,7,21]),t.map(function(e,t){return{value:e,label:"Next "+e+" Days"}})},I=function(){var e=[25,50,75,100,150,200].map(function(e,t){return{value:e,label:e}});return e.push({value:1e3,label:"Nationwide"}),e},K=function(e,t){return[{type:"select",label:"Subscription starts within the",metadataKey:"subscription_start_days",options:w(t),defaultOptionIndex:2,toAdd:!0},{type:"input",label:"Location",metadataKey:"location",options:e,defaultOptions:"London, United Kingdom",toAdd:!0},{type:"select",label:"Distance (radius in miles)",metadataKey:"max_distance",options:I(),defaultOptionIndex:6,toAdd:!0},{type:"slider",label:"PCO"===t?"Weekly Budget":"Monthly Budget",metadataKeys:["price_min","price_max"],defaultOptionIndex:[100,3e3],toAdd:!0},{type:"select",label:"City Jurisdiction",metadataKey:"city_jurisdiction",options:N("city_jurisdiction",e),defaultOptionIndex:0,toAdd:"PCO"===t},{type:"select",label:"Uber Type",metadataKey:"sub_type ",options:N("sub_type",e),defaultOptionIndex:0,toAdd:"PCO"===t},{type:"select",label:"Vehicle Make",metadataKey:"vehicle_make",options:N("vehicle_make",e),defaultOptionIndex:0,toAdd:!0},{type:"select",label:"Gearbox",metadataKey:"transmission",options:N("transmission",e),defaultOptionIndex:0,toAdd:!0},{type:"slider",label:"Number of Seats",metadataKeys:["number_of_seats_min","number_of_seats_max"],defaultOptionIndex:[2,9],toAdd:!0},{type:"select",label:"Year",metadataKey:"year",options:N("year",e),defaultOptionIndex:0,toAdd:!0},{type:"select",label:"Fuel Type",metadataKey:"fuel",options:N("fuel",e),defaultOptionIndex:0,toAdd:!0},{type:"select",label:"Car Type",metadataKey:"tags",options:N("tags",e),defaultOptionIndex:0,toAdd:"Consumer"===t},{type:"select",label:"Body Type",metadataKey:"body_information",options:N("body_information",e),defaultOptionIndex:0,toAdd:!0}]},M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e){e.tags&&(e.tags=[e.tags]),a.props.callback(e)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=[];this.props.metadata&&(e=this.props.metadata.vehicle_type,a=K(this.props.metadata.aggregations,this.props.metadata.vehicle_type).filter(function(e){return e.toAdd}).map(function(e,a){return"select"===e.type?i.a.createElement("div",{key:a},i.a.createElement(g,{name:e.label,metadataKey:e.metadataKey,options:e.options,defaultOptionIndex:e.defaultOptionIndex,onSelectCustomBox:t.handleChange})):"input"===e.type?i.a.createElement("div",{key:a},i.a.createElement(_,{name:e.label,metadataKey:e.metadataKey,defaultOption:e.defaultOptions,onBlurCustomInput:t.handleChange})):"slider"===e.type?i.a.createElement("div",{key:a},i.a.createElement(k,{name:e.label,metadataKeys:e.metadataKeys,defaultOptionIndex:e.defaultOptionIndex,onDropSlider:t.handleChange})):i.a.createElement("div",null)}));return i.a.createElement("div",{className:"side-bar"},i.a.createElement(x,{vehicleType:e,onSelectCustomBox:this.handleChange}),a)}}]),t}(n.Component),S=a(229),T=a(231),V=a(226),q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e){a.props.callback({vehicle_type:e})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(S.a,null,i.a.createElement(T.a,{className:"radioGroupToggleSearchType",type:"radio",name:"options",defaultValue:this.props.vehicleType,onChange:this.handleChange},i.a.createElement(V.a,{className:"buttonToggleSearchType",value:"Consumer"},"Consumer"),i.a.createElement(V.a,{className:"buttonToggleSearchType",value:"PCO"},"PCO")))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e){a.props.callback({vehicle_type:e})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex align-items-center header-title"},i.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-8"},i.a.createElement("a",{className:"d-flex icon-area",href:"https://www.joindrover.com/cars/search"},i.a.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 542.4 96.48",width:"140px",height:"25px"},i.a.createElement("title",null,"Drover logo"),i.a.createElement("path",{fill:"#000000",d:"M157.11,94.55l-33-36.91h-13.4V94.55H95.88V1.94h43.54q14.24,0,23,7.67t8.78,20.25q0,11.88-8,19.42T142,57.5l33.45,37.05ZM139.42,44.23q7.61,0,12.3-3.94a12.93,12.93,0,0,0,4.7-10.43,13.16,13.16,0,0,0-4.7-10.51q-4.69-4-12.3-4H110.67V44.23Z"}),i.a.createElement("path",{fill:"#000000",d:"M262.45,14.1a46.78,46.78,0,0,1,14,34.28q0,20.17-14,34.14t-34.35,14q-20.32,0-34.28-14t-14-34.14q0-20.33,14-34.35T228.1,0Q248.41,0,262.45,14.1ZM251.87,72.71q9.67-9.82,9.68-24.33,0-14.66-9.68-24.54a33.46,33.46,0,0,0-47.48,0q-9.6,9.89-9.6,24.54,0,14.5,9.6,24.33a33.63,33.63,0,0,0,47.48,0Z"}),i.a.createElement("path",{fill:"#000000",d:"M329.16,94.55H314.92L274.7,1.94H291L322,74.5l31-72.56h16.45Z"}),i.a.createElement("path",{fill:"#000000",d:"M449.72,94.55h-69V1.94h68.83v13.4h-54V41.47h49.9V54.74h-49.9v26.4h54.18Z"}),i.a.createElement("path",{fill:"#000000",d:"M524,94.55,491,57.64H477.57V94.55H462.78V1.94h43.54q14.23,0,23,7.67t8.78,20.25q0,11.88-8,19.42T509,57.5L542.4,94.55ZM506.32,44.23q7.6,0,12.3-3.94a12.9,12.9,0,0,0,4.7-10.43,13.13,13.13,0,0,0-4.7-10.51q-4.7-4-12.3-4H477.57V44.23Z"}),i.a.createElement("path",{fill:"#000000",d:"M69.6,14.86Q55.71,1.93,32.35,1.94H0V15.35H0l17,32.9h0L0,81.14H0V94.55H32.35q23.35,0,37.25-12.93T83.49,48.24Q83.49,27.78,69.6,14.86ZM58.75,72q-9.82,9.13-26.4,9.13H15.25l17-32.89-17-32.91H32.35q16.57,0,26.4,9.13t9.81,23.77Q68.56,62.9,58.75,72Z"})))),i.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-4"},i.a.createElement(q,{vehicleType:this.props.vehicleType,callback:this.props.callback})))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e){var t;switch(e.order_by){case 0:t={order_by:"price",order_direction:"asc"};break;case 1:t={order_by:"price",order_direction:"desc"};break;case 2:t={order_by:"distance",order_direction:"asc"};break;case 3:t={order_by:"recommended",order_direction:"asc"}}a.props.callback(t)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getSortOptions",value:function(){return[{value:0,label:"Price - Low to High"},{value:1,label:"Price - High to Low"},{value:2,label:"Distance - Close to Far"},{value:3,label:"Recomended"}]}},{key:"render",value:function(){var e=!this.props.isLoading&&this.props.metadata?this.props.metadata.total_count+" vehicles available":"Searching for vehicles";return i.a.createElement("div",{className:"w-100"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-8"},i.a.createElement("h2",null,e)),i.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-4 no-padding"},i.a.createElement(g,{metadataKey:"order_by",options:this.getSortOptions(),defaultOptionIndex:3,onSelectCustomBox:this.handleChange}))))}}]),t}(n.Component),P=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.hide?{}:{display:"none"};return i.a.createElement("div",{className:"w-100",style:e},i.a.createElement("div",{className:"row text-center"},i.a.createElement("i",{className:"fas fa-spinner fa-spin fa-2x"})))}}]),t}(n.Component),A=function(){return{isLoading:!1,cars:[],metadata:null,currentOptions:{per_page:30,page:1,vehicle_type:"Consumer",number_of_months:12,number_of_weeks:52,order_by:"recommended",order_direction:"asc",location:"London, United Kingdom",max_distance:1e3,number_of_seats_max:9,number_of_seats_min:2,price_max:3e3,price_min:100,rolling:!1,subscription_start_days:30,tags:{}}}},B=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).requestCars=function(t){e.setState({isLoading:!0}),window.scrollTo(0,0),m.a.post("https://app.joindrover.com/api/web/vehicles",e.createRequestParams(t)).then(function(t){e.setState({cars:t.data.data,metadata:t.data.metadata,isLoading:!1})}).catch(function(t){e.setState({isLoading:!1}),alert(t)})},e.state=A(),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.requestCars()}},{key:"createRequestParams",value:function(e){var t=this.state.currentOptions;if(e)if(e.vehicle_type){var a=A();a.currentOptions.vehicle_type=e.vehicle_type,t=a.currentOptions,this.setState(a)}else Object.assign(this.state.currentOptions,e),t=this.state.currentOptions;return t}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"header-division-line"},i.a.createElement("div",{className:"container"},i.a.createElement(D,{vehicleType:this.state.currentOptions.vehicle_type,callback:this.requestCars}))),i.a.createElement("div",null,i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xs-12 col-sm-3 col-lg-3"},i.a.createElement(M,{metadata:this.state.metadata,callback:this.requestCars})),i.a.createElement("div",{className:"col-xs-12 col-sm-9 col-lg-9"},i.a.createElement(L,{isLoading:this.state.isLoading,metadata:this.state.metadata,cars:this.state.cars,callback:this.requestCars}),i.a.createElement(P,{hide:this.state.isLoading}),i.a.createElement(b,{isLoading:this.state.isLoading,cars:this.state.cars,numberOfMonths:this.state.currentOptions.number_of_months,numberOfWeeks:this.state.currentOptions.number_of_weeks,metadata:this.state.metadata,callback:this.requestCars})))))))}}]),t}(n.Component);s.a.render(i.a.createElement(B,null),document.getElementById("root"))}},[[120,2,1]]]);
//# sourceMappingURL=main.446b2947.chunk.js.map